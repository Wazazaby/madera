<nb-card>
  <nb-card-header>{{ title }}</nb-card-header>
  <nb-card-body>

    <form (ngSubmit)="onCreate()" #form="ngForm" aria-labelledby="title">

        <!-- Prénom-->
        <div class="form-control-group">
          <label class="label" for="input-firstName">Prénom</label>
          <input nbInput
                 fullWidth
                 name="firstName"
                 id="input-firstName"
                 placeholder="Prénom"
                 [formControl]="formUser.controls.firstName"
                 [status]="formUser.controls.firstName.dirty ? (formUser.controls.firstName.invalid  ? 'danger' : 'success') : ''"
                 [required]="true"
                 [attr.aria-invalid]="formUser.controls.firstName.invalid && formUser.controls.firstName.touched ? true : null">
          <ng-container *ngIf="formUser.controls.firstName.hasError('required') && formUser.controls.firstName.touched">
            <p class="text-danger">
              Le prénom est obligatoire!
            </p>
          </ng-container>
        </div>

        <!-- Nom -->
        <div class="form-control-group">
          <label class="label" for="input-firstName">Nom</label>
          <input nbInput
                 fullWidth
                 name="lastName"
                 id="input-lastName"
                 placeholder="Nom"
                 [formControl]="formUser.controls.lastName"
                 [status]="formUser.controls.lastName.dirty ? (formUser.controls.lastName.invalid  ? 'danger' : 'success') : ''"
                 [required]="true"
                 [attr.aria-invalid]="formUser.controls.lastName.invalid && formUser.controls.lastName.touched ? true : null">
          <ng-container *ngIf="formUser.controls.lastName.hasError('required') && formUser.controls.lastName.touched">
            <p class="text-danger">
              Le nom est obligatoire!
            </p>
          </ng-container>
        </div>

        <!-- Téléphone-->
        <div class="form-control-group">
          <label class="label" for="input-phoneNumber">Numéro de téléphone</label>
          <input nbInput
                 fullWidth
                 id="input-phoneNumber"
                 placeholder="Numéro de téléphone"
                 name="phoneNumber"
                 [formControl]="formUser.controls.phoneNumber"
                 [status]="formUser.controls.phoneNumber.dirty ? (formUser.controls.phoneNumber.invalid  ? 'danger' : 'success') : ''"
                 [required]="true"
                 [attr.aria-invalid]="formUser.controls.phoneNumber.invalid && formUser.controls.phoneNumber.touched ? true : null"
          >
          <ng-container *ngIf="(formUser.controls.phoneNumber.hasError('required') || formUser.controls.phoneNumber.hasError('pattern')) && formUser.controls.phoneNumber.touched">
            <p class="text-danger" *ngIf="formUser.controls.phoneNumber.hasError('required')">
              La numéro de téléphone est obligatoire!
            </p>

            <p class="text-danger" *ngIf="formUser.controls.phoneNumber.hasError('pattern')">
              La numéro de téléphone est incorrect!
            </p>
          </ng-container>
        </div>

        <!-- Email-->
        <div class="form-control-group">
          <label class="label" for="input-email">E-mail</label>
          <input nbInput
                 fullWidth
                 id="input-email"
                 placeholder="E-mail"
                 name="email"
                 [formControl]="formUser.controls.email"
                 [status]="formUser.controls.email.dirty ? (formUser.controls.email.invalid  ? 'danger' : 'success') : ''"
                 [required]="true"
                 [attr.aria-invalid]="formUser.controls.email.invalid && formUser.controls.email.touched ? true : null"
          >
          <ng-container *ngIf="(formUser.controls.email.hasError('required') || formUser.controls.email.hasError('pattern')) && formUser.controls.email.touched">
            <p class="text-danger" *ngIf="formUser.controls.email.hasError('required')">
              L'email est obligatoire!
            </p>

            <p class="text-danger" *ngIf="formUser.controls.email.hasError('pattern')">
              L'email est incorrect!
            </p>
          </ng-container>
        </div>

        <!-- Rôle-->
        <div class="form-control-group">
          <label class="label" for="input-role">Role:</label>
          <nb-select placeholder="Sélectionner un role"
                     id="input-role"
                     fullWidth
                     name="role"
                     [(selected)]="role"
                     [formControl]="formUser.controls.role"
                     [status]="formUser.controls.role.dirty ? (formUser.controls.role.invalid  ? 'danger' : 'success') : ''"
                     [required]="true"
                     [attr.aria-invalid]="formUser.controls.role.invalid && formUser.controls.role.touched ? true : null"
                     ngDefaultControl
          >
            <nb-select-label> {{ role }} </nb-select-label>
            <nb-option [value]="r.label" *ngFor="let r of roles">{{r.label}}</nb-option>
          </nb-select>

          <ng-container *ngIf="formUser.controls.role.hasError('required') && formUser.controls.role.touched">
            <p class="text-danger">
              Le rôle est obligatoire!
            </p>
          </ng-container>
        </div>

        <nb-card-footer class="d-flex justify-content-between">
          <button class="btn btn-outline-danger" (click)="dismiss()">Annuler</button>
          <button class="btn btn-outline-success" [disabled]="!formUser.valid">Ajouter</button>
        </nb-card-footer>
    </form>
  </nb-card-body>

</nb-card>
